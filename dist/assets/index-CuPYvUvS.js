import{r as d,a as w,u as T,b as _,_ as p,T as O,R as S,c as k}from"./vendor-DL-htu74.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(r){if(r.ep)return;r.ep=!0;const e=i(r);fetch(r.href,e)}})();var v={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L=d,B=Symbol.for("react.element"),C=Symbol.for("react.fragment"),I=Object.prototype.hasOwnProperty,D=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$={key:!0,ref:!0,__self:!0,__source:!0};function j(a,t,i){var o,r={},e=null,s=null;i!==void 0&&(e=""+i),t.key!==void 0&&(e=""+t.key),t.ref!==void 0&&(s=t.ref);for(o in t)I.call(t,o)&&!$.hasOwnProperty(o)&&(r[o]=t[o]);if(a&&a.defaultProps)for(o in t=a.defaultProps,t)r[o]===void 0&&(r[o]=t[o]);return{$$typeof:B,type:a,key:e,ref:s,props:r,_owner:D.current}}m.Fragment=C;m.jsx=j;m.jsxs=j;v.exports=m;var n=v.exports,h={},b=w;h.createRoot=b.createRoot,h.hydrateRoot=b.hydrateRoot;function N(){const a=T(),t=_();return{connected:!!(t!=null&&t.account.address),wallet:t,connector:a}}function U(){const{connector:a}=N(),t="EQDBziMwzxZBqZ0nvyuLdR0-6DUqcNTVCJAMjqQ-Y5dbGLAO",i=e=>e>=.5&&e<=1e3,o=e=>e;return{buy:async e=>{if(!i(e))throw new Error("Invalid purchase amount");try{const s=e*1e9,l=await a.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+600,messages:[{address:t,amount:s.toString()}]});return{tokenAmount:o(e),transaction:l}}catch(s){throw console.error("Error buying tokens:",s),s}},calculateTokenAmount:o,validatePurchaseAmount:i}}function q(){const{connected:a,wallet:t}=N(),{buy:i,calculateTokenAmount:o,validatePurchaseAmount:r}=U(),[e,s]=d.useState("0.00"),[l,y]=d.useState(""),[f,g]=d.useState(!1);d.useEffect(()=>{const c=window.Telegram.WebApp;c.ready(),c.expand()},[]),d.useEffect(()=>{t&&x()},[t]);const x=async()=>{try{const u=await(await fetch(`https://toncenter.com/api/v2/getAddressBalance?address=${t.account.address}`)).json();if(u.ok){const P=u.result/1e9;s(P.toFixed(2))}}catch(c){console.error("Error updating balance:",c),p.showAlert("Error updating balance. Please try again.")}},R=c=>{const u=c.target.value;(u===""||r(Number(u)))&&y(u)},A=async()=>{if(!(!a||!l)){g(!0);try{const c=await i(Number(l));p.showAlert(`Success! You will receive ${c.tokenAmount} RAP tokens.`),y(""),x()}catch(c){console.error("Error buying tokens:",c),p.showAlert("Error buying tokens. Please try again.")}finally{g(!1)}}},E=l?o(Number(l)):0;return n.jsxs("div",{className:"container",children:[n.jsx("img",{src:"/$RAPc(logo).png",alt:"RAP Token",className:"logo"}),n.jsxs("div",{className:"card",children:[n.jsxs("div",{className:"card-header",children:[n.jsx("h1",{children:"RAP Token Presale"}),n.jsxs("p",{className:"balance",children:["Balance: ",e," TON"]})]}),n.jsxs("div",{className:"input-group",children:[n.jsx("input",{type:"number",value:l,onChange:R,placeholder:"Enter amount (0.5 - 1000 TON)",min:"0.5",max:"1000",step:"0.1",disabled:f}),n.jsx("span",{className:"currency",children:"TON"})]}),n.jsxs("div",{className:"info",children:[n.jsxs("p",{children:["You will receive: ",E," RAP"]}),n.jsx("p",{children:"Rate: 1 TON = 1 RAP"})]}),n.jsx("div",{className:"buttons",children:a?n.jsx("button",{className:"buy-button",onClick:A,disabled:!l||!r(Number(l))||f,children:f?"Processing...":"Buy RAP"}):n.jsx(O,{})})]})]})}const M="https://raw.githubusercontent.com/Woll2/rapgame-tgminiapp/main/tonconnect-manifest.json";h.createRoot(document.getElementById("root")).render(n.jsx(S.StrictMode,{children:n.jsx(k,{manifestUrl:M,children:n.jsx(q,{})})}));
