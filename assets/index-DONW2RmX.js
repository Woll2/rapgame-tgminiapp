import{r as d,a as P,u as T,b as _,_ as p,T as O,R as S,c as k}from"./vendor-DL-htu74.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(r){if(r.ep)return;r.ep=!0;const e=i(r);fetch(r.href,e)}})();var v={exports:{}},f={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L=d,B=Symbol.for("react.element"),C=Symbol.for("react.fragment"),I=Object.prototype.hasOwnProperty,D=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U={key:!0,ref:!0,__self:!0,__source:!0};function j(a,t,i){var n,r={},e=null,s=null;i!==void 0&&(e=""+i),t.key!==void 0&&(e=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)I.call(t,n)&&!U.hasOwnProperty(n)&&(r[n]=t[n]);if(a&&a.defaultProps)for(n in t=a.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:B,type:a,key:e,ref:s,props:r,_owner:D.current}}f.Fragment=C;f.jsx=j;f.jsxs=j;v.exports=f;var o=v.exports,h={},g=P;h.createRoot=g.createRoot,h.hydrateRoot=g.hydrateRoot;function N(){const a=T(),t=_();return{connected:!!(t!=null&&t.account.address),wallet:t,connector:a}}function $(){const{connector:a}=N(),t="EQDBziMwzxZBqZ0nvyuLdR0-6DUqcNTVCJAMjqQ-Y5dbGLAO",i=e=>e>=.5&&e<=1e3,n=e=>e;return{buy:async e=>{if(!i(e))throw new Error("Invalid purchase amount");try{const s=e*1e9,l=await a.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+600,messages:[{address:t,amount:s.toString()}]});return{tokenAmount:n(e),transaction:l}}catch(s){throw console.error("Error buying tokens:",s),s}},calculateTokenAmount:n,validatePurchaseAmount:i}}function q(){const{connected:a,wallet:t}=N(),{buy:i,calculateTokenAmount:n,validatePurchaseAmount:r}=$(),[e,s]=d.useState("0.00"),[l,y]=d.useState(""),[m,x]=d.useState(!1);d.useEffect(()=>{const c=window.Telegram.WebApp;c.ready(),c.expand()},[]),d.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{const u=await(await fetch(`https://toncenter.com/api/v2/getAddressBalance?address=${t.account.address}`)).json();if(u.ok){const w=u.result/1e9;s(w.toFixed(2))}}catch(c){console.error("Error updating balance:",c),p.showAlert("Error updating balance. Please try again.")}},E=c=>{const u=c.target.value;(u===""||r(Number(u)))&&y(u)},R=async()=>{if(!(!a||!l)){x(!0);try{const c=await i(Number(l));p.showAlert(`Success! You will receive ${c.tokenAmount} RAP tokens.`),y(""),b()}catch(c){console.error("Error buying tokens:",c),p.showAlert("Error buying tokens. Please try again.")}finally{x(!1)}}},A=l?n(Number(l)):0;return o.jsx("div",{className:"container",children:o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h1",{children:"RAP Token Presale"}),o.jsxs("p",{className:"balance",children:["Balance: ",e," TON"]})]}),o.jsxs("div",{className:"input-group",children:[o.jsx("input",{type:"number",value:l,onChange:E,placeholder:"Enter amount (0.5 - 1000 TON)",min:"0.5",max:"1000",step:"0.1",disabled:m}),o.jsx("span",{className:"currency",children:"TON"})]}),o.jsxs("div",{className:"info",children:[o.jsxs("p",{children:["You will receive: ",A," RAP"]}),o.jsx("p",{children:"Rate: 1 TON = 1 RAP"})]}),o.jsx("div",{className:"buttons",children:a?o.jsx("button",{className:"buy-button",onClick:R,disabled:!l||!r(Number(l))||m,children:m?"Processing...":"Buy RAP"}):o.jsx(O,{})})]})})}const M="https://raw.githubusercontent.com/Woll2/rapgame-tgminiapp/main/tonconnect-manifest.json";h.createRoot(document.getElementById("root")).render(o.jsx(S.StrictMode,{children:o.jsx(k,{manifestUrl:M,children:o.jsx(q,{})})}));
