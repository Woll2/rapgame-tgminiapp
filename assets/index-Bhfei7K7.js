import{r as d,a as _,u as w,b as T,_ as f,T as O,R as S,c as k}from"./vendor-DL-htu74.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function c(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function n(r){if(r.ep)return;r.ep=!0;const e=c(r);fetch(r.href,e)}})();var g={exports:{}},m={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L=d,B=Symbol.for("react.element"),C=Symbol.for("react.fragment"),I=Object.prototype.hasOwnProperty,D=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U={key:!0,ref:!0,__self:!0,__source:!0};function j(a,t,c){var n,r={},e=null,s=null;c!==void 0&&(e=""+c),t.key!==void 0&&(e=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)I.call(t,n)&&!U.hasOwnProperty(n)&&(r[n]=t[n]);if(a&&a.defaultProps)for(n in t=a.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:B,type:a,key:e,ref:s,props:r,_owner:D.current}}m.Fragment=C;m.jsx=j;m.jsxs=j;g.exports=m;var o=g.exports,h={},v=_;h.createRoot=v.createRoot,h.hydrateRoot=v.hydrateRoot;function N(){const a=w(),t=T();return{connected:!!(t!=null&&t.account.address),wallet:t,connector:a}}function $(){const{connector:a}=N(),t="EQDBziMwzxZBqZ0nvyuLdR0-6DUqcNTVCJAMjqQ-Y5dbGLAO",c=e=>e>=.5&&e<=1e3,n=e=>e;return{buy:async e=>{if(!c(e))throw new Error("Invalid purchase amount");try{const s=e*1e9,i=await a.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+600,messages:[{address:t,amount:s.toString()}]});return{tokenAmount:n(e),transaction:i}}catch(s){throw console.error("Error buying tokens:",s),s}},calculateTokenAmount:n,validatePurchaseAmount:c}}f.init();function q(){const{connected:a,wallet:t}=N(),{buy:c,calculateTokenAmount:n,validatePurchaseAmount:r}=$(),[e,s]=d.useState("0.00"),[i,y]=d.useState(""),[p,x]=d.useState(!1);d.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{const u=await(await fetch(`https://toncenter.com/api/v2/getAddressBalance?address=${t.account.address}`)).json();if(u.ok){const P=u.result/1e9;s(P.toFixed(2))}}catch(l){console.error("Error updating balance:",l),f.showAlert("Error updating balance. Please try again.")}},R=l=>{const u=l.target.value;(u===""||r(Number(u)))&&y(u)},E=async()=>{if(!(!a||!i)){x(!0);try{const l=await c(Number(i));f.showAlert(`Success! You will receive ${l.tokenAmount} RAP tokens.`),y(""),b()}catch(l){console.error("Error buying tokens:",l),f.showAlert("Error buying tokens. Please try again.")}finally{x(!1)}}},A=i?n(Number(i)):0;return o.jsx("div",{className:"container",children:o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"card-header",children:[o.jsx("h1",{children:"RAP Token Presale"}),o.jsxs("p",{className:"balance",children:["Balance: ",e," TON"]})]}),o.jsxs("div",{className:"input-group",children:[o.jsx("input",{type:"number",value:i,onChange:R,placeholder:"Enter amount (0.5 - 1000 TON)",min:"0.5",max:"1000",step:"0.1",disabled:p}),o.jsx("span",{className:"currency",children:"TON"})]}),o.jsxs("div",{className:"info",children:[o.jsxs("p",{children:["You will receive: ",A," RAP"]}),o.jsx("p",{children:"Rate: 1 TON = 1 RAP"})]}),o.jsx("div",{className:"buttons",children:a?o.jsx("button",{className:"buy-button",onClick:E,disabled:!i||!r(Number(i))||p,children:p?"Processing...":"Buy RAP"}):o.jsx(O,{})})]})})}const M="https://woll2.github.io/rapgame-tgminiapp/tonconnect-manifest.json";h.createRoot(document.getElementById("root")).render(o.jsx(S.StrictMode,{children:o.jsx(k,{manifestUrl:M,children:o.jsx(q,{})})}));
